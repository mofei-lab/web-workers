<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>worker demo</title>
</head>

<body>
    <div>
        <h1>不使用workder:</h1>
        <p>点击开始计算按钮，系统开始计算斐波那契数列。</p>
        <p>在没有使用workers的情况下，可以看到计算过程中，浏览器的UI线程会卡住(页面停止响应)，直到计算结束。</p>
    </div>
    <button style="padding: 10px; margin: 10px 0;">开始计算</button>
    <div>
        <span>当前时间戳：</span>
        <span class="time"></span>
    </div>

    <script>
        //
        let button = document.querySelector('button');
        button.addEventListener('click', function () {
            var time = new Date();
            var result = fabonacci(43);
            alert('计算结束，结果为' + result + '，用时' + (new Date() - time) + 'ms');
        });


        // 斐波那契数列
        function fabonacci(n) {
            if (n === 0) {
                return 0;
            }
            if (n === 1) {
                return 1;
            }
            return fabonacci(n - 1) + fabonacci(n - 2);
        }


        // 计时器
        let timeDom = document.querySelector('.time');

        function updateTime() {
            timeDom.innerHTML = +new Date();
            requestAnimationFrame(updateTime);
        }

        requestAnimationFrame(updateTime);
    </script>
</body>

</html>